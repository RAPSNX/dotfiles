# Setup new host

Create host directory with `hardware-configuration.nix` & `default.nix`, configuring NixOS modules via the `system`
option.

## Sops-nix

In order to access secrets via `sops-nix`, the `age-key` which is autogenerated for every host needs to be copied
over to the `.sops.yaml` config.

```
# Connect to the new host, and copy the public key of the autogenerated age-key.
sudo cat /home/rap/.config/sops/age/keys.txt | grep "public key"

# Add recipient in .sops.yaml and paste public key, assign it to a creaton_rule.
# Then a rekey for the secrets.yaml is necessary.
sops updatekeys secrets/secrets.yaml
```

# TODO: Add sops-nix docs, add & edit secrets

# TODO: Add workdevice manual steps, ppa hyprland and uwsm
